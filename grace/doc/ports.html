<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
<style type="text/css" media="all">
@import "grace.css";
</style>
<title> Ports </title>
</head>

<body>
<div id="content">

<h1> Ports Menu</h1>

<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#scorecapture">Real Time vs Score Capture</a></li>
<li><a href="#midi-out">Midi Out</a></li>
<li><a href="#midi-in">Midi In</a></li>
<li><a href="#midi-seq">Midi Seq</a></li>
<li><a href="#csound">Csound</a></li>
<li><a href="#appendix">Appendix</a>
  <ol>
    <li><a href="#osx-midi">Configuring Midi on OSX</a></li>
    <li><a href="#linux-midi">Making Midi Connections on Linux</a></li>
  </ol>
</li>
</ul>

<h2 id="introduction">Introduction</h2>

<p> The Console Window's Ports menu connects Grace to different audio
 visual resources such as MIDI devices, audio libraries, plotting
 windows, score files, etc.  The exact set of ports available in the
 menu is determined when the application is built. </p>
 
<h2><span id="realtime">Real Time</span> vs <span id="scorecapture">Score Capture</span> </h2>

<p>

Ports support both real time and score capture (faster than real time)
modes. In real time mode open ports processes data at the exact time
you <a href="cm.html#send">send</a> it. In Score Capture mode ports
capture the data you send in an internal score buffer and do not send
it out the port. Your can then edit, display, play, save, export or
delete this captured data as you see fit.  </p>

<p>Port menus are sensitive to whether or not Score Capture is on or
off and whether or not the port's buffer currently contains score
data or not. If score data exists then the port's menu will contain active
items that let you operate on that data, for example to save it to a
file or play it.</p>

<p>In summary:</p>

<ul>

  <li>To work with a port in real time mode set Ports>Score
 Capture to off. In real time mode the time stamp 0 in the data you
 send to the port means 'now' and values greater than 0 schedule the data
 that many seconds into the future.  </li>

  <li>To work with a port in score mode, set Ports>Score
Capture to on.  In Score Capture mode the processes you sprout run
many times faster than real time and the time stamp 0 inside a running
process means 'current score time'.  If you work interactively in
Score Capture mode, by executing send statements directly, the time
stamps in the data are taken to be absolute score time in seconds.</li>

</ul>

<p>The current Score Capture mode is saved as a Grace preference so it will persist across sessions or until you change it.</p>

See <a href="cm.html#send">Sending Data to Ports</a> for more information.


<h2 id="midi-out">Midi Out</h2>

<p>The Midi Out Port connects Grace to external MIDI devices and software applications.</p>

<p>To send output select the appropriate output device listed at the
top of the <span class="menuitem">Midi Out</span> menu. If no devices
are listed then you are not using an external MIDI device you will
have to configure your computer to route MIDI output to a software synth or sequencing program of your choice. See the <a href="#appendix">Appendix</a> for more information. The current output device is saved as a Grace preference so it will persist across sessions or until you change it.</p>


<h4><span class="menuitem">Test Output</span></h4>

<p> Use this menu item to send a random burst of MIDI notes to the
selected MIDI device. This is an easy way test your sound setup before
you begin working.</p>


<h4><span class="menuitem">Hush</span></h4>

<p>Clears the MIDI output queue of any pending data and stops all algorithms running in the scheduler. This item is only active if the output queue or scheduling queue are busy.</p>

<h4 id="midi-microtuning"><span class="menuitem">Microtuning</span></h4>

<p>Sub menu to tune the Midi Out port to various micro-tonal
resolutions. The current tuning setting is saved as a Grace preference so it will persist across sessions or until you change it.</p>

<p>To produce microtonal sound you need to do two things
</p>

<ol>

<li>Select the desired resolution from the Microtuning menu</li>

<li>Send floating point key numbers to the port. See the MIDI tutorial for more information about this.</li>

</ol>


<p> Resolutions smaller then Semi-tone 'claim' channels from the
maximum available set of 16 untuned channels. For example in
Quartertone tuning the channels 0-7 are available for use and channels
8-15 are reserved by the port. </p>

<div class="float">
<table width="80%">
  <tr><th style="text-align: left;">Resolution</th> <th style="text-align: left;">Microtuned Channel #</th> <th style="text-align: left;">Untuned channel #</th></tr>

  <tr><td>Semitone</td><td> &mdash;</td> <td>0-15 </td> </tr>
  <tr><td>Quartertone</td><td>0-7</td> <td> &mdash;</td> </tr>
  <tr><td>33 Cents</td><td>0-4</td> <td>  15 </td> </tr>
  <tr><td>25 Cents</td><td>0-3</td> <td> &mdash;</td> </tr>
  <tr><td>20 Cents</td><td>0-2</td> <td> 15 </td> </tr>
  <tr><td>17 Cents</td><td>0-1</td> <td> 12-15 </td> </tr>
  <tr><td>14 Cents</td><td>0-1</td> <td> 14-15 </td></tr>      
  <tr><td>12 Cents</td><td>0-1</td> <td> &mdash;</td> </tr>
  <tr><td>11 Cents</td><td>0</td>   <td> 9-15  </td> </tr>
  <tr><td>10 Cents</td><td>0</td>   <td> 10-15 </td> </tr>
  <tr><td>9 Cents</td><td>0</td>    <td> 11-15 </td> </tr>
  <tr><td>8 Cents</td><td>0</td>    <td> 12-15 </td> </tr>  
  <tr><td>7.7 Cents</td><td>0</td>  <td> 13-15 </td> </tr>  
  <tr><td>7.1 Cents</td><td>0</td>  <td> 14-15 </td ></tr>  
  <tr><td>6.6 Cents</td><td>0</td>  <td> 15 </td> </tr>  
  <tr><td>6.25 Cents</td><td>0</td> <td> &mdash;</td> </tr>  
</table>
</div>
  
<h5><span class="menuitem">Microtuning&gt;Avoid Drum Track</span></h5>
<p> Disables micotuning from using channel #9 which, depending on your output device, may be hardwired to produce only drum sounds.
</p>

<h5><span class="menuitem">Microtuning&gt;Pitch Bend Width</span></h5>

<p> Select the number of semitones your device defines as the total pitch bend range. The default value is 2, which is the typical width for most MIDI devices today.
</p>

<h4 id="midi-instruments"><span class="menuitem">Instruments...</span></h4>

<p>The Instruments Dialog displays and assigns instruments to the
available channels. The left side of the dialog lists each available
channel number and its current tuning and instrument assignment. The
right side of the dialog lists the possible instruments you can select
from. To select a different instrument, select the channel line, then
select the Instrument and press Send.</p>

<div class="float">
  <img src="midi-instruments.png" alt="[midi-instruments.png]"/>
</div>




<h2 id="midi-in">Midi In</h2>

<p>The Midi In Port connects Grace to external MIDI devices and
software applications. The input port allows you to associate an <a
 href="cm.html#mp:inhook"> input hook</a> (function) to receive <a
 href="cm.html#midi-message">midi messages</a> asynchronously, as
soon as they arrive at the port. The hook can then operate on the data
it receives, for example, by sprouting an algorithm to use the
information in some manner.
</p>

<h4><span class="menuitem">Test Input</span></h4>

<p> When this item is selected the messages that are received are
printed in the Console window. Use this item to that test message input is working before you start working.</p>

<h4 id="midi-configure"><span class="menuitem">Configure...</span></h4>

<p> The Midi Receive Settings dialog allows you to accept only certain
types of messages or channels.  Messages will be passed to any
MIDI input hook (function) that you assign to the Midi In port. See <a
 href="cm.html#mp:inhook">mp:inhook</a> for information about
setting Midi input hooks.</p>

<div class="float">
  <img src="midi-configure.png" alt="[midi-configure.png]"/>
</div>

<dl>
  <dt style="font-weight: bold;">Receive Messages</dt>
  <dd>Configures the port to accept all types of message or the specific types you select.</dd>
  <dt style="font-weight: bold;">Receive Messages</dt>
  <dd>Configures the port to accept all types of message or the specific types you select.</dd>
</dl>




<h2 id="midi-seq">Midi Seq</h2>

<p>The MIDI Seq port allows you to record, capture and manipulate MIDI
data in an internal score buffer that you can then edited, play and
save.</p>

<h4><span class="menuitem">Record Midi Output</span></h4>

<p>
Select this item to record all MIDI events sent out the Midi Out port. This item is only available when Ports>Score Capture is off.
</p>

<h4><span class="menuitem">Reset Recording</span></h4>

<p>
Resets recording, the next message you send will restart the recording process. This item is only available when Ports>Score Capture is off.</p>

<h4><span class="menuitem">Auto Play</span></h4>

<p> If selected the Midi Seq will be played automatically after the
last sprouted process stops. This item is only available when
Ports>Score Capture is on.</p>

<h4><span class="menuitem">Auto Save</span></h4>

<p> If selected the Midi Seq will be saved to a midi file
automatically after the last sprouted process stops. This item is only
available when Ports>Score Capture is on.</p>


<h4><span class="menuitem">Clear</span></h4>
<p>
Clears the capture sequence of any data.
</p>


<h4><span class="menuitem">Print Info</span></h4>

<p>
Prints status information about the capture sequence to the Console window.
</p>

<h4><span class="menuitem">Play</span></h4>

<p>
Plays the current contents of the capture sequence.
</p>

<h4><span class="menuitem">Copy to Plotter</span></h4>

<p>
Sends a copy of the sequence to a Plotter window. Not yet implemented.
</p>

<h4><span class="menuitem">Copy to Tracks</span></h4>

<p>
Copies the current contents of the capture sequence to the Tracks sub menu.
</p>

<h4><span class="menuitem">Tracks&gt;</span></h4>

<p>
Use this sub menu to select, edit and import MIDI tracks. Each item in the sub menu is a track of midi information. Listed tracks can be renamed, deleted, sent to the capture sequence or mixed into the capture sequence.
</p>

<h4><span class="menuitem">Tracks&gt;Import...</span></h4>

<p>
The Import Tracks dialog allows you to import track data from midi files into the Tracks menu.
</p>


<h4><span class="menuitem">Save</span></h4>

<p>
Saves the contents of the capture sequence to a midi file.
</p>

<h4><span class="menuitem">Save As...</span></h4>

<p>
Saves the contents of the capture sequence to a different midi file.
</p>

<h4><span class="menuitem">Export...</span></h4>

<p>
The Export dialog allows you to export the contents of the capture sequence as Text to the Console Window, the clipboard or a new Editor window. The text format of the exported data can be lists of data or send expressions in either SAL or Lisp format.
</p>

<div class="float">
  <img src="midiseq-export.png" alt="[midiseq-export.png]"/>
</div>

<dl>

  <dt style="font-weight: bold;">Export</dt>

  <dd>Select an optional channel, start time and end time in the capture sequence to export.</dd>

  <dt style="font-weight: bold;">Include</dt>
  <dd>Select what type(s) of messages you want to export.</dd>

  <dt style="font-weight: bold;">Export To</dt>
  <dd>Select a destination for the exported text.</dd>


  <dt style="font-weight: bold;">Data Format</dt>
  <dd>Specifies the output format for the exported data. Possible values are:
    <dl>
      <dt style="font-weight: bold;">SAL data</dt>
      <dd>Data is exported as SAL lists, each sublist contains the pfield data of a midi message.</dd>
      <dt style="font-weight: bold;">Lisp data</dt>
      <dd>Data is exported as Lisp lists.</dd>
      <dt style="font-weight: bold;">Sal Sends</dt>
      <dd>Exports data as a sequence of SAL <a href="cm.html#send">send statements</a> that, if executed, would recreate the score.</dd>
      <dt style="font-weight: bold;">Lisp Sends</dt>
      <dd>Exports data as a sequence of Lisp <a href="cm.html#send">send statements</a> that, if executed, would recreate the score.</dd>
      </dl>
  </dd>
</dl>


<h2 id="csound">Csound</h2>

<p>The Csound port connects Grace to the <a href="http://sourceforge.net/project/showfiles.php?group_id=8196&amp;&amp;package_id=120482">CSound5 sound synthesis library</a> for audio generation. Note that the Csound library must be installed on your machine before the Grace application can be started.</p>

<p>See <a href="cm.html#csound-port">Csound Port Methods</a> for documentation on how to work with the Csound Port in Scheme.</p>



<h4 id="csound-open"><span class="menuitem">Open...</span></h4>

<p>Opens the Csound port for real time audio processing. You can open and close the port multiple times in the same session, optionally reconfiguring it with different audio settings and .orc files each time you open it. The current Csound configuration is saved in the preferences file so that when you restart Grace the port will be initialized your settings from the previous session. </p>

<div class="float">
  <img src="csound-open.png" alt="[csound-open.png]"/>


<dl>
  
  <dt style="font-weight: bold;">Options</dt>

  <dd>The real time audio settings to initialize Csound with. These options are saved in the grace preferences file.</dd>
  
  <dt style="font-weight: bold;">Orchestra</dt>    

  <dd>An orchestra (.orc) file containing the audio instruments for
  Csound to use. The file chooser remembers the last ten orchestra
  files you specify.</dd>

</dl>
</div>

<h4 id="csound-close"><span class="menuitem">Close</span></h4>

<p>Closes the open Csound Port. You can send score data to a closed Csound port.</p>

<h4 id="csound-write"><span class="menuitem">Write...</span></h4>

<p>Writes all the buffered score data to Csound using the specified non-real time audio options and orchestra file. </p>

<div class="float">
  <img src="csound-write.png" alt="[csound-write.png]"/>
</div>

<h3 id="csound-export"><span class="menuitem">Export...</span></h3>

<p>Exports score data using a specified text format an output destination.</p>

<div class="float">
  <img src="csound-export.png" alt="[csound-export.png]"/>


<dl>
  <dt style="font-weight: bold;">From</dt>
  <dd>An optional start time in the score to begin exporting. Defaults to the beginning of the score.</dd>
  <dt style="font-weight: bold;">To</dt>
  <dd>An optional end time in the score to stop exporting. Defaults to the end of the score.</dd>
  <dt style="font-weight: bold;">i statements</dt>
  <dd>Determines if the score's i statements will be included in the exported data.</dd>
  <dt style="font-weight: bold;">f statements</dt>
  <dd>Determines if the score's f statements will be included in the exported data.</dd>

  <dt style="font-weight: bold;">Export Format</dt>
  <dd>Specifies the output format for the exported data. Possible values are:
    <dl>
      <dt style="font-weight: bold;">Csound score</dt>
      <dd>Data is exported as i and f score statements.</dd>
      <dt style="font-weight: bold;">SAL data</dt>
      <dd>Data is exported for SAL lists, each sublist contains the pfield data of one i or f statement.</dd>
      <dt style="font-weight: bold;">Lisp data</dt>
      <dd>Data is exports as Lisp lists, each sublist holds the pfield data of one i or f statement.</dd>
      <dt style="font-weight: bold;">Sal Sends</dt>
      <dd>Exports data as a sequence of SAL <a href="scheme.html#send">send statements</a> that, if executed, would recreate the score.</dd>
      <dt style="font-weight: bold;">Lisp Sends</dt>
      <dd>Exports data as a sequence of Lisp <a href="scheme.html#send">send statements</a> that, if executed, would recreate the score.</dd>
      </dl>
  </dd>

<dt style="font-weight: bold;">Export To</dt>
<dd>Selects the destination to receive the exported score data, either the Console Window, clipboard or a specified file.</dd>
</dl>

</div>

<h4 id="csound-display"><span class="menuitem">Display...</span></h4>

<p>Sends score data to Plotter for graphical editing. (Not yet available.)</p>





<h4><span class="menuitem">Clear</span></h4>

<p>Clears the port of all buffered score data.</p>





<h2 id="appendix">Appendix</h2>

<h3 id="osx-midi">1. Configuring MIDI on OSX</h3>

<p>In order to route MIDI data to OSX applications in addition to external devices you may need to make a one-time configuration change to your MIDI environmant:</p>

<ul>
  <li> Start the "Audio Midi Setup" program located in your  Applications/Utilities folder.</li>

  <li> Select the "MIDI Devices" tab at the top of the main
  window.</li>

  <li> Double-click the "IAC Driver" icon visible in the main
  panel to open the "IAC Driver Properties" window.</li>

  <li> Click the toggle button marked "Device is online"</li>

  <li> Quit the application.</li>
</ul>

<!-- h3>Installing a Software Synth on OSX </h3 -->

<ul>

  <li> Download and install the <a
   href="http://notahat.com/simplesynth">SimpleSynth</a> application,
  by Pete Yandell.</li>

  <li> Start the SimpleSynth application and select "IAC Driver Bus 1"
  from its Midi Source menu. </li>

  <li> Start Grace and select the "IAC Driver Bus 1" device listed in the Ports>Midi Out menu.
</li>

</ul>


<h3 id="linux-midi">2. Making MIDI Connections on Linux</h3>

<ul>

<li>Start Grace and select the output device you want to use in
the <span class="menuitem">Midi Out&gt;</span> menu.</li>

<li>Start <code>qjackctl</code> and click on the Connect button in
the main window to open the Connections window.</li>

<li>Select the ALSA tab in the Connections window.</li>

<li>Select "Juce MIDI Output" in the Readable Clients pane.</li>

<li>In the Writable Clients pane select the same device that you
connected to in Grace.</li>

<li>Click on the Connect button to establish the ALSA connection.</li>

<li>Return to Grace and use the <span class="menuitem">Midi Out&gt;Test Output</span> to test that you can make sound.</li>


</ul>


</div>

<hr/>

<p>
<a href="http://validator.w3.org/check?uri=referer"><img
src="http://www.w3.org/Icons/valid-xhtml10-blue"
alt="Valid XHTML 1.0 Strict" height="31" width="88" /></a>
</p>


</body>
</html>


