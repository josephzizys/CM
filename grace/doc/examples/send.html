<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
<style type="text/css" media="all">
span.string  {color: #bc8f8f;} 
span.output  {color: #bc8f8f;} 
span.comment {color: #b22222;}  
span.keyword {color: #da70d6;} 
span.reserved {color: #a020f0;}
span.classof {color: #228b22;}
span.command {color: #0000ff;}
span.constant {color: #5f9ea0;}
pre.salcode{}
</style>
<title>send.html</title>
</head>
<body>
<p><span style="font-size:large;">Download source: <a href="/Lisp/grace/doc/examples/send.sal">
<img src="fileicon.png" style="border:none;" alt="[fileicon.png]" /> send.sal</a></span></p>
<hr/><pre class="salcode">
<span class="comment">;; sending data to ports</span>

<span class="comment">;; the send command routes message data to port methods. for example,</span>
<span class="comment">;; the "mp:midi" message routes data to the Midi Port's midi</span>
<span class="comment">;; method. Midi Port data can be specified positionally or using</span>
<span class="comment">;; keyword arguments.</span>

<span class="comment">;; positional values are interpeted: time, dur, key, amp, chan</span>

<span class="command">send</span> <span class="string">"mp:midi"</span>, 0 , .5 , 60, .5, 0

<span class="comment">;; you can specify the data in any order using the keyword names of</span>
<span class="comment">;; the args, for example:</span>

<span class="command">send</span> <span class="string">"mp:midi"</span>, <span class="keyword">key:</span> between(60, 90)

<span class="comment">;; you can mix positional and keywords</span>

<span class="command">send</span> <span class="string">"mp:midi"</span>, 0, 2, <span class="keyword">amp:</span> .4

<span class="comment">;; the "mp:prog" message to sends program changes:</span>

<span class="command">begin</span>
  <span class="reserved">send</span> <span class="string">"mp:prog"</span>, <span class="keyword">val:</span> between(0,8), <span class="keyword">chan:</span> 0
  <span class="reserved">send</span> <span class="string">"mp:midi"</span>, <span class="keyword">key:</span> between(60, 90)  
<span class="command">end</span>

<span class="comment">;; you can send data into the future by specifying time values greater</span>
<span class="comment">;; than 0:</span>

<span class="command">loop</span> <span class="reserved">repeat</span> 20 
  <span class="reserved">for</span> x <span class="reserved">from</span> 0 <span class="reserved">by</span> .2
  <span class="reserved">send</span> <span class="string">"mp:midi"</span>, x, <span class="keyword">key:</span> between(60, 90)
<span class="command">end</span>

<span class="comment">;; you can send data in real time using a process. real time data</span>
<span class="comment">;; should either not have time stamp or a time stamp of 0 because the</span>
<span class="comment">;; process sends the data exactly when it is needed.</span>

<span class="command">define</span> <span class="classof">process</span> simp(n, r, lo, hi)
  <span class="reserved">run</span> <span class="reserved">repeat</span> n 
    <span class="reserved">send</span> <span class="string">"mp:note"</span>, <span class="keyword">key:</span> between(lo,hi)
    <span class="reserved">wait</span> pick(.1, .2 , .4)
  <span class="reserved">end</span>

<span class="command">sprout</span> simp(20, .1, 60, 84)

</pre>
</pre>
<hr/>
<div style="float:left;"><p>Generated by <em>sal2html</em> Sat Apr 26 08:11:05 2008</p></div><div style="float:right;"><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10-blue" style="border:none;" alt="Valid XHTML 1.0 Strict" height="31" width="88"/></a></div>
</body>
</html>
