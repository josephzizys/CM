<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
<style type="text/css" media="all">
span.string  {color: #bc8f8f;} 
span.output  {color: #bc8f8f;} 
span.comment {color: #b22222;}  
span.keyword {color: #da70d6;} 
span.reserved {color: #a020f0;}
span.classof {color: #228b22;}
span.command {color: #0000ff;}
span.constant {color: #5f9ea0;}
pre.salcode{}
</style>
<title>csound.html</title>
</head>
<body>
<p><span style="font-size:large;">Download source: <a href="/Lisp/grace/doc/examples/csound.sal">
<img src="fileicon.png" style="border:none;" alt="[fileicon.png]" /> csound.sal</a></span></p>
<hr/><pre class="salcode">
<span class="comment">;; Sending data to Csound</span>

<span class="comment">;; To run these examples your Ports menu in the Console window must</span>
<span class="comment">;; have a Csound port menu available and the Csound5 package must be</span>
<span class="comment">;; installed on your machine.  Choose Ports&gt;Csound&gt;Open... to open</span>
<span class="comment">;; Csound with the default orchestra file "grace.orc".</span>

<span class="comment">;; the "cs:i" message sends data to instruments. its positional values</span>
<span class="comment">;; are interpreted: ins, time, dur, p4...</span>

<span class="command">send</span> <span class="string">"cs:i"</span>, 1, 0, 2, between(48, 72), 8000

<span class="comment">;; you can send future time stamps out the port:</span>

<span class="command">loop</span> <span class="reserved">for</span> i <span class="reserved">from</span> 0 <span class="reserved">below</span> 10 <span class="reserved">by</span> .5
  <span class="reserved">send</span> <span class="string">"cs:i"</span>, 1, i, 2, between(60, 75), 8000
<span class="command">end</span>

<span class="comment">;; now put the port in score mode so data are routed to the score</span>
<span class="comment">;; rather than out the (open) port:</span>

<span class="command">send</span> <span class="string">"cs:score"</span>, <span class="constant">#t</span>

<span class="comment">;; send some events to the score:</span>

<span class="command">loop</span> <span class="reserved">for</span> i <span class="reserved">from</span> 0 <span class="reserved">below</span> 10 <span class="reserved">by</span> .5
  <span class="reserved">send</span> <span class="string">"cs:i"</span>, 1, i, 2, between(60, 75), 8000
<span class="command">end</span>

<span class="comment">;; print contents of score. (Use Ports&gt;Csound&gt;Export for full control</span>
<span class="comment">;; over printing the score to the Console, clipboard or file. )</span>

<span class="command">send</span> <span class="string">"cs:print"</span>

<span class="comment">;; print contents of score between time 5 to 7</span>

<span class="command">send</span> <span class="string">"cs:print"</span>, 5, 7

<span class="comment">;; send contents of score between time out the open port</span>

<span class="command">send</span> <span class="string">"cs:play"</span>, 5, 7, -5

<span class="comment">;; delete current score contents and switch to record mode</span>

<span class="command">send</span> <span class="string">"cs:clear"</span>
<span class="command">send</span> <span class="string">"cs:record"</span>, <span class="constant">#t</span>

<span class="comment">;; now eval this statement several times. on each eval the data will</span>
<span class="comment">;; be sent out the port and also recorded to the score</span>

<span class="command">send</span> <span class="string">"cs:i"</span>, 1, 0, 2, between(60, 75), 8000

<span class="comment">;; print the data recorded in score</span>

<span class="command">send</span> <span class="string">"cs:print"</span>

<span class="comment">;; clear score and stop record mode</span>

<span class="command">send</span> <span class="string">"cs:clear"</span>
<span class="command">send</span> <span class="string">"cs:record"</span>, <span class="constant">#f</span>

<span class="comment">;; the "cs:f" message sends func data to csound:</span>

<span class="command">send</span> <span class="string">"cs:f"</span>, 1, 0, 65536, 10, 1

<span class="comment">;; now try out instrument 2</span>

<span class="command">send</span> <span class="string">"cs:i"</span>, 2, 0, .5, between(60, 80), 5000

<span class="comment">;; sprout a process that sends csound data in realtime</span>

<span class="command">define</span> <span class="classof">process</span> ranins1(len, rhy, lb, ub, amp)
  <span class="reserved">run</span> <span class="reserved">with</span> dur = rhy * 2
    <span class="reserved">repeat</span> len
    <span class="reserved">for</span> k = lb <span class="reserved">then</span> between(lb,ub)
    <span class="reserved">send</span> <span class="string">"cs:i"</span>, 1, 0, dur, k, amp
    <span class="reserved">wait</span> rhy
  <span class="reserved">end</span>

<span class="command">sprout</span> ranins1(10, .2, 60, 72, 1000)

</pre>
</pre>
<hr/>
<div style="float:left;"><p>Generated by <em>sal2html</em> Sun May  4 15:08:25 2008</p></div><div style="float:right;"><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10-blue" style="border:none;" alt="Valid XHTML 1.0 Strict" height="31" width="88"/></a></div>
</body>
</html>
