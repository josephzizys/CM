<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
<style type="text/css" media="all">
@import "../css/cm.css";
</style>
<title>cm.sh</title>
</head>
<body>
<div id="content">

<!-- Entry: "cm.sh" -->
<dl class="dictsyntax">
<dt>[Bash script]</dt>
<dd><span class="syntax"><code class="entry">cm.sh</code> 
[<code class="keyword">-qnv</code>] 
[<code class="keyword">-e</code> <var>editor</var>] 
[<code class="keyword">-l</code> <var>lisp</var>]
[<code class="keyword">-P</code> <var>prefs</var>] 
[<code class="keyword">-O</code> <var>os</var>] 
[<code class="keyword">-A</code> <var>arch</var>] 
[<code class="keyword">-F</code> <var>lisp-flavor</var>]
[<code class="keyword">-V</code> <var>version</var>]
[<code class="keyword">-R</code> <var>cmroot</var>]
</span></dd>
</dl>

<p>
Starts Common Music either by loading it into a fresh Lisp session or
by launching a saved image file that already contains CM loaded. The
cm.sh script can run Common Music in a terminal or as a subprocess
of any Emacs-compatible editor such as xemacs(1), emacs(1), or
gnuclient(1).

Symlinks are resolved when the script runs so a system-wide command
can be installed simply by placing a link to the script anywhere on
the user's path. The ch.sh script file itself should not be moved from
Common Music's bin/ subdirectory.

Script parameters are auto-detected at runtime so normally it will
suffice to call cm.sh without any arguments.  Auto-detection may be
overridden via options and environment variables.
 </p>

<p>
<code class="entry">cm.sh</code> supports the following options:
</p>

<dl>

<dt><code class="keyword">-h</code></dt>
<dd>
Print command help and exit.
</dd>

<dt><code class="keyword">-q</code></dt>
<dd>
Echo platform's 'operating system/architecture' string and exit.
</dd>

<dt><code class="keyword">-n</code></dt>
<dd>
Dry run, don't do anything. Used in conjunction with <code
class="keyword">-v</code> for debugging.
</dd>

<dt><code class="keyword">-v</code></dt>
<dd>
Be verbose.
</dd>

<dt><code class="keyword">-e</code> {<var>editor</var>}</dt>
<dd>
Run Common Music under this editor.  The value should be a command on
your path that starts an Emacs-compatible editor (emacs, xemacs,
gnuclient) or a path to the executable. On OS X you can specify
'Emacs' to invoke an Emacs application installed as
/Applications/Emacs.app.  Default is '&lt;none&gt;'
</dd>

<dt><code class="keyword">-l</code> {<var>lisp</var>}</dt>
<dd>
Run Common Music in this Lisp/Scheme. The value should be a command on
your path or a path to the Lisp executable.  Default value is
'&lt;unset&gt;'.
</dd>

<dt><code class="keyword">-P</code> {<var>prefs</var>}</dt>
<dd>
Preference order (left-to-right) for auto-detecting Lisp
commands. (default: 'openmcl cmucl acl clisp guile')
</dd>

<dt><code class="keyword">-O</code> {<var>os</var>}</dt>
<dd>
Operating system if auto-detection fails.
</dd>

<dt><code class="keyword">-A</code> {<var>arch</var>}</dt>
<dd>
Machine architecture if auto-detection fails.
</dd>

<dt><code class="keyword">-F</code> {<var>lisp-flavor</var>}</dt>
<dd>
Lisp flavor if auto-detection fails.
</dd>

<dt><code class="keyword">-V</code> {<var>version</var>}</dt>
<dd>
Lisp version if auto-detection fails.
</dd>

<dt><code class="keyword">-R</code> {<var>cmroot</var>}</dt>
<dd>
Common Music root directory if auto-detection fails.
</dd>
</dl>

<p>
<code class="entry">cm.sh</code> references the following environment
variables.
</p>

<dl>

<dt><code class="keyword">CM_EDITOR</code></dt>
<dd>
Name or path of an Emacs-compatible editor under which to run cm,
e.g. 'xemacs' or '/usr/bin/gnuclient'.  Same as <code
class="keyword">-e</code> option.
</dd>

<dt><code class="keyword">CM_RUNTIME</code></dt>
<dd>
Name or path of a Lisp or Scheme system to execute, e.g. 'clisp' or
'/usr/bin/openmcl'.  Same as <code class="keyword">-l</code> option.
</dd>

<dt><code class="keyword">CM_RUNTIME_PREFS</code></dt>
<dd>
List of <code class="keyword">CM_RUNTIME</code> commands to try during
auto-detection, in order of preference.  Same as <code
class="keyword">-r</code> option.
</dd>

<dt><code class="keyword">CM_OS</code></dt>
<dd>
Symbolic name of host OS, e.g. 'linux' or 'darwin'.  Same as <code
class="keyword">-O</code> option.
</dd>

<dt><code class="keyword">CM_ARCH</code></dt>
<dd>
Symbolic name of host architecture, e.g. 'i386' or 'powerpc'.  Same as
<code class="keyword">-A</code> option.
</dd>

<dt><code class="keyword">CM_RUNTIME_FLAVOR</code></dt>
<dd>
Symbolic name of the Lisp/Scheme flavor to run, e.g. 'clisp' or
'cmucl'.  Useful in conjunction with <code
class="keyword">CM_RUNTIME</code> or the <code
class="keyword">-l</code> option if the flavor can't be derived from
the command name or path.  Same as <code class="keyword">-F</code>
option.
</dd>

<dt><code class="keyword">CM_RUNTIME_VERSION</code></dt>
<dd>
Version of the Lisp/Scheme to run.  Useful in conjunction with <code
class="keyword">CM_RUNTIME</code> or the <code
class="keyword">-l</code> option if the version can't be derived from
the command name or path.  Same as <code class="keyword">-V</code> option.
</dd>

<dt><code class="keyword">CM_ROOT_DIR</code></dt>
<dd>
Absolute path of the Common Music root directory if auto-detection
fails.  Same as <code class="keyword">-R</code> option.
</dd>

</dl>

<p>
Requirements: bash(1), cat(1), cut(1), echo(1), head(1), sed(1),
sort(1), tr(1), uname(1), which(1); getopts and ls; a working
installation of a Lisp or Scheme runtime; the '-repl' option if clisp
is used (clisp 2.31 or higher).
</p>

<!-- See also -->
<h4>See Also:</h4>
<ul>
<li><a href="make-cm-fn.html"><kbd>make-cm</kbd></a><kbd>&nbsp;</kbd>[Function]</li>
</ul>
</div>
<hr class="inv"/>

<!-- Footer -->
<div id="footer">
<div id="version">$Name$</div>
<div id="cvs-info">($Revision$, $Date$)</div>
</div>
</body>
</html>













































