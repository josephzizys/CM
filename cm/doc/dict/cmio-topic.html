<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
<style type="text/css" media="all">
@import "../css/cm.css";
</style>
<title>CMIO</title>
</head>
<body>
<div id="content">

<dl class="dictsyntax">
<dt>[Topic]</dt>
<dd><span class="syntax">CMIO</span></dd>
</dl>

The CMIO (Common Music Input/Output) window facilitates the generation
of musical data to and from sound synthesis and display applications.
The window is intended to be an efficient, structured replacement to
entering equivalent input and output expressions inside the Lisp
REPL. As an alternate evaluation method, CMIO windows perform their
own error handling and, by default, report Lisp errors without forcing
the user into the Lisp debugger. This allows a novice user to
experiment with the various sound rendering systems in a fairly
forgiving environment. 
</p>

<p>
Which sound applications (called <em>targets</em> in the window) are
actually active at any given time depends on what programs are
installed on the host computer and also what software systems have
been loaded into Common Music. These system do not have to be loaded
ahead of musical experimentation; the window's Systems and Files pages
permit external software such as CLM, CMN and Midishare to be
dynamically configured and loaded at any appropriate point in the
working process.  
</p>

<p>
To render musical events to a sound application the user provides an
expression that produces events, selects a target application, and
presses the Compose button. Each application page has numerous fields
for customizing behavior. These fields can be set to different values
in the interface whenever the Compose button is pressed and can be
initialized to a user's preference by passing appropriate arguments to
the <a href="cmio-fn.html">cmio</a> function when the window is
created.
</p>

<h2>Window Layout</h2>

<p>
A CMIO window consists of four components arranged from top to bottom
in the window:
</p>

<ul>
<li>A <em>Sources</em> notebook holds tabbed pages that relate to
creating and generating event data.</li>

<li>A <em>Targets</em> notebook holds tab pages related to sound
synthesis and display applications.
</li>
<li>
An <em>Executive</em> frame manages the system's current working
directory and (possibly) a current target file. <!-- The Execute
button triggers actions on files according to user-defined
semantics. -->
</li>
<li>A <em>Status</em> line displays color coded information about
ongoing actions in the window.</li>
</ul>

<p>
Each tabbed page contains a set of <em>fields</em> representing the
input/output features of a given application or task.

The right-justified pages (such as Help or Systems) control more
general features of the window or in the surrounding Lisp environment.
</p>

<div class="float" id="example1">
<p class="captxt">
<span class="floatlabel">Example 1.</span> The four components of a
CMIO window: Sources, Targets, Executive and the Status
line. Event IO is the currently active source page and Midi is
the currently selected target.
</p>

<p>
<img src="cmio1.png" alt="[cmio1.png]"/>
</p>
</div>

<p>
Color highlighting provides some visual clues as to how information on
a page is interpreted by the interface:
</p>

<ul>
<li>Blue labels mark <em>required</em> fields that must contain information
before a page can execute.
</li>

<li>
Yellow backgrounds indicate fields that will be
<em>evaluated</em> by Lisp when the information is accessed.
</li>

<li>
White backgrounds indicate fields that either contain uninterpreted
text or are <em>read</em> to produce a Lisp value. It is possible to
force evaluation in a white field using the #.<em>expr </em> notation,
where <em>expr</em> is a Lisp expression to be evaled to produce the
contents of the field.
</li>

<li>
The Status line uses colors to classify the type of message displayed:
green represents a normal information, yellow indicates a warning or
notification, red signifies an error condition.
</li>
</ul>

<h2>Notebooks and Pages</h2>

<p>
Each application, or task, is represented by a tabbed notebook page
inside the window. The pages of the Sources notebook relate to the
creation of source material in CM: generating musical event data and
defining aggregate structure with <a href="seq-cls.html">seq</a>
containers. The Targets notebook pages define various "destinations"
that musical data can be rendered to or imported from. The following
sections briefly describe the layout and functionality of each
Notebook's pages.
</p>

<h3>Sources Notebook</h3>

<h4 id="containers">Containers</h4>
<p>
The Containers page is used to create, rename and delete <a href="seq-cls.html">seq</a> containers.
</p>

<div class="float">
<p>
<img src="cmio2.png" alt="[cmio2.png]"/>
</p>
</div>

<ul>
<li>The Containers menu contains all of the existing named seq
objects. Selecting a seq from the menu places it in the name buffer
for editing.</li>
<li>The Name buffer can be set to the name of a sequence to edit or
create.</li>
<li>The New button creates a sequence using the name specified in the
name buffer.</li>
<li>The Rename button renames the currently selected seq in the
Containers menu to the name in the edit buffer.</li>
<li>The Delete button deletes the seq listed in the name buffer as
well as all of its subobjects.</li>
<li>The Update button refills the Containers menu with any new seq
objects created outside the window, for example in the Lisp REPL or
another CMIO window.
</li>
</ul>

<h4 id="eventio">Event IO</h4>
<p>
The <a href="cmio-fn.html#eventio">Event IO</a> page is used to
generate musical events to and from the currently selected target
page.  Using the Event IO page in conjunction with the current target
page is equivalent to calling the <a href="events-fn.html">events</a>
function in the REPL.
</p>

<div class="float">
<p>
<img src="cmio3.png" alt="[cmio3.png]"/>
</p>
</div>

<ul>
<li>The Events buffer must be set to a valid Lisp expression that,
when evaluated, produces musical events to schedule in the currently
selected target page. This buffer is equivalent to the first argument
to the <a href="events-fn.html">events</a> function.</li>

<li>The Starts buffer contains a number or list of numbers specifying
the start time offset of the events in the target score. This buffer
is equivalent to the optional third argument to the <a
href="events-fn.html">events</a> function. If no start time offset if
provided it defaults to zero.  It is sometimes useful to specify a
negative offset. For example, to render a selection that starts at
time 10 in a <a href="plotter-topic.html">plotter window</a> at time 0
in the score, specify a -10 offset in the Starts buffer.</li>

<li>The Compose button renders the musical events to the currently
selected target page.</li>
</ul>

<h4 id="help">Help</h4>
<p>
The Help page is not yet implemented.
</p>
<!--div class="float">
<p>
<img src="cmio4.png" alt="[cmio4.png]"/>
</p>
</div-->


<h3>Targets Notebook</h3>

<h4 id="clm">CLM</h4>
<p>
The <a href="cmio-fn.html#clm">CLM page</a> manages input and output
to <a href="clm-stream-cls.html">CLM score files</a> and <a href="clm-audio-stream-cls.html">CLM audio files</a>.
</p>
<div class="float">
<p>
<img src="cmio5.png" alt="[cmio5.png]"/>
</p>
</div>
<ul>
<li>If Score File is checked then output will include creating the
.clm score file named in the associated buffer.</li>
<li>If Versions is checked then a number will be appended to the
output file name so that previous versions of the file will not
be not overwritten.</li>
<li>The Import button will <a
href="import-events-fn.html#clm">import</a> the .clm score named in
the Executive's File buffer and the imported seq will automatically be
placed in the Events buffer on the <a href="#eventio">Event IO</a>
page.</li>
<li>If Sound file is checked then output will include writing the audio
file (.snd, .aiff or .wav) named in the associated buffer.</li>
<li>If Play is checked then the audio file will be played
automatically after it is written. See the <a href="#files">Files</a>
page for more information.
</li>
</ul>

<p>
The remaining fields on the page are specific to CLM audio files, see
the CLM documentation on <a
href="http://ccrma.stanford.edu/software/snd/snd/clm.html#with-sound">with-sound</a>
for more information.
</p>

<h4 id="cmn">CMN</h4>
<p>
The <a href="cmio-fn.html#cmn">CMN page</a> manages output to CMN score files and EPS files.
</p>
<div class="float">
<p>
<img src="cmio6.png" alt="[cmio6.png]"/>
</p>
</div>

<ul>
<li>The Output file  buffer holds the name of the .cmn or .eps file to output.</lI>
<li>If Versions is checked then a number will be appended to the
output file name so that previous versions of the file will not
be not overwritten.</li>
<li>If View is checked then the .eps file will be viewed
automatically after it is written. See the <a href="#files">Files</a>
page for more information.
</li>
<li>If One paged file is checked then CMN will create one eps file to
hold the entire manuscript otherwise it will generate one eps file per
page of the manuscript.</li>
<li>The remaining fields on the page are CMN score options, consult
the documentation on <a href="cmn-stream-cls.html">CMN streams</a> for
more information.</i>

</ul>

<h4 id="csound">Csound</h4>
<p>
The <a href="cmio-fn.html#csound">Csound page</a> manages IO to CSound score files and audio files.
</p>

</p>
<div class="float">
<p>
<img src="cmio7.png" alt="[cmio7.png]"/>
</p>
</div>
<ul>
<li>The Score file buffer holds the name of the .sco file to output.</lI>
<li>If Versions is checked then a number will be appended to the
output file name so that previous versions of the file will not
be not overwritten.</li>
<li>If View is checked then the .eps file will be viewed
automatically after it is written. See the <a href="#files">Files</a>
page for more information.
<li>The Import button will <a
href="import-events-fn.html#csound">import</a> the .sco score named in
the Executive's File buffer and the imported seq will automatically be
placed in the Events buffer on the <a href="#eventio">Event IO</a>
page.</li>

<li>If Header is supplied then it will be written as the header of the
output .sco file. To include a long header, set a Lisp
variable <em>var </em> to the header string and specify
#.<em>var </em> as the value of the buffer.</li>

<li>If Orchestra is checked the the buffer should contain the name of
the .orc file to use and Sound output is enabled. See the <a
href="#files">Files</a> page for information about configuring the
Csound command and audio playback.
</ul>

<h4 id="cmn">MIDI</h4>
<p>
The <a href="cmio-fn.html#cmn">MIDI page</a> ...
</p>
<div class="float">
<p>
<img src="cmio8.png" alt="[cmio8.png]"/>
</p>
</div>
<ul>
<li>If Microtuning is enabled then floating point key numbers in event
data will be interpreted as microtonal adjustments on MIDI keynum
values.  See the documentation on <a
href="midi-stream-cls.html">channel tuning</a> for more information.

<li>The MIDI file buffer holds the name of the .mid file to output.</lI>
<li>If Versions is checked then a number will be appended to the
output file name so that previous versions of the file will not
be not overwritten.</li>
<li>If Play is checked then the .mid file will be played
automatically after it is written. See the <a href="#files">Files</a>
page for more information.
<li>The Import button will import the .mid file listed in the
Executive's file buffer according to the values of the Importing
fields. The imported material will be placed in the Events buffer on
the <a href="#eventio">Event IO</a> page.</li>  See the documentation
on <a href="import-events-fn.html#midi">import-events</a> for
information about the importing fields.
</li>
</ul>

<h4 id="midishare">Midishare</h4>
<p>
The <a href="cmio-fn.html#midishare">Midishare page</a> ...
</p>
<div class="float">
<p>
<img src="cmio9.png" alt="[cmio9.png]"/>
</p>
</div>
<ul>
</ul>

<h4 id="plotter">Plotter</h4>
<p>
The <a href="cmio-fn.html#plotter">Plotter page</a> ...
</p>
<div class="float">
<p>
<img src="cmio10.png" alt="[cmio10.png]"/>
</p>
</div>
<ul>
</ul>

<h4 id="seq">Seq</h4>
<p>
The <a href="cmio-fn.html#seq">Seq page</a> ...
</p>
<div class="float">
<p>
<img src="cmio11.png" alt="[cmio11.png]"/>
</p>
</div>
<ul>
</ul>


<h4 id="files">Files</h4>
<p>
The <a href="cmio-fn.html#files">Files page</a> ...
</p>
<div class="float">
<p>
<img src="cmio12.png" alt="[cmio12.png]"/>
</p>
</div>
<ul>
</ul>

<h4 id="systems">Systems</h4>
<p>
The <a href="cmio-fn.html#systems">Systems page</a> ...
</p>
<div class="float">
<p>
<img src="cmio13.png" alt="[cmio13.png]"/>
</p>
</div>
<ul>
</ul>

<h3 id="systems">The Executive</h3>
<p>
The <a href="cmio-fn.html#executive">Executive page</a> ...
</p>
<div class="float">
<p>
<img src="cmio14.png" alt="[cmio14.png]"/>
</p>
</div>
<ul>
</ul>


<h2>Error Handling and Notification</h2>
<p>
A CMIO window facilitates musical tasks that would otherwise be
accomplished by evaluating expressions inside the Lisp REPL
window. Under normal conditions, lisp evaluation errors will cause the
REPL to stop execution in an <em>error break</em>.  But the CMIO
window executes via foreign function (GTK) callbacks that do not
expect the flow of control to be interrupted. As a result, Lisp error
breaks inside CMIO will likely cause the window to freeze and &mdash;
in some cases &mdash; may even cause the Lisp session to abruptly
terminate. For this reason the CMIO window evaluate CM function calls
calls in such a way that error messages are reported in the message
line without triggering a Lisp error break. If you need to enter the
Lisp break loop in order to debug a problem then set the global
variable <code>*cm-break-on-errors*</code> to true, but realize that
once the break condition is resolved the CMIO window (and possibly the
whole GTK session) may no longer work.
</p>





</div> <!-- end content -->

<hr class="inv"/>
<!-- Footer -->
<div id="footer">
<div id="version">$Name$</div>
<div id="cvs-info">($Revision$, $Date$)</div>
</div>

</body>
</html>
