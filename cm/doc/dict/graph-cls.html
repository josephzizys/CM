<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
<style type="text/css" media="all">
@import "../css/cm.css";
</style>
<title>graph</title>
</head>
<body>
<div id="content">

<!-- Entry: "graph" -->
<dl class="dictsyntax">
<dt>[Class]</dt>
<dd><span class="syntax"><code class="entry">graph</code></span></dd>
</dl>

<p>
Enumerates data according to transition rules associated with the data
in the pattern.
</p>

<p><code class="entry">graph</code> supports the following slot initializations:
</p>
<dl>

<dt><code class="keyword">:of</code> <var>list</var></dt>
<dd>
The list of <var>graph nodes</var> to traverse in the pattern. Each
graph node is specified as a list:
<blockquote>
<p>(<var>element</var> { <var>property</var> <var>value</var> }+)</p>
</blockquote>
<var>Element</var> is the value  the node contains and is
followed by zero or more optional <em>property value</em> pairs:

<dl>
<dt>
<span class="keyword">:id</span> {<var>integer</var> | <var>symbol</var>}</dt>
<dd>
Identifies the node with a unique name or number.  If omitted the
identifier defaults to the node's element, but since a node may
contain any kind Lisp object it is good practice to provide each
node with an explicit id independant of its element.
</dd>

<dt><span class="keyword">:to</span> {<var>id</var>| <var>pattern</var>}</dt>
<dd>
Specifies the transition rule for the graph node.  The value may be a
single node identifier or a pattern of identifiers.  The <span
class="keyword">:to</span> property can also be specified as a
"right-arrow" <span class="keyword">-&gt;</span>.
</dd>
</dl>
</dd>

<dt><code class="keyword">:selector</code> <var>function</var></dt>
<dd>
Sets the node selection function of the graph. This function is passed
three values, the pattern, the last node selected and the list of ids
representing past selections.  Defaults to the system's graph
traversal function <kbd>#'default-graph-node-select</kbd>.
</dd>

<dt><code class="keyword">:props</code> <var>list</var></dt>
<dd>
A property list to associate with the graph. This list can be used to
cache information for a specified <span
class="keyword">:selector</span> function.
</dd>

<dt><code class="keyword">:starting-node-index</code> <var>integer</var></dt>
<dd>
Sets the node at position <var>index</var> in the node list as the
initial node for the pattern. The default value is 0, which means that
first node in the node list will produce the first value in the
pattern.
</dd>

<dt><code class="keyword">:last</code> ({<var>id</var>}*)</dt>
<dd>
Initializes the graph to a specific list of ids representing past node
choices. Can be used in conjunction with implementing Markov selection.
</dd>


</dl>

<h4>Examples:</h4>

<div class="float">
<p class "captxt">
<span class="floatlabel">Example 1.</span> A cyclic graph that starts on the third node (list index 2).
</p>
<pre class="code">
(<span class="special">define</span> <span class="defined">x</span>
 (<a href="new-mac.html">new</a> graph <span class="keyword">:of</span> '((a <span class="keyword">:id</span> 1 <span class="keyword">:to</span> 2)
                  (b <span class="keyword">:id</span> 2 <span class="keyword">:to</span> 3)
                  (c <span class="keyword">:id</span> 3 <span class="keyword">:to</span> 1))
      <span class="keyword">:starting-node-index</span> 2))

(<a href="next-fn.html">next</a> x 10)
<span class="output">(c a b c a b c a b c)</span></pre>
</div>


<div class="float">
<p class "captxt">
<span class="floatlabel">Example 2.</span> A graph with a subpattern in node 2 and a random transition rule in node 3.
</p>
<pre class="code">
(<span class="special">define</span> <span class="defined">x</span>
 (<a href="new-mac.html">new</a> graph <span class="keyword">:of</span> `((a <span class="keyword">:id</span> 1 <span class="keyword">:to</span> 2)
                  (,(<a href="new-mac.html">new</a> <a href="cycle-cls.html">cycle</a> <span class="keyword">:of</span> '(b1 b2)) <span class="keyword">:id</span> 2 <span class="keyword">:to</span> 3)
                  (c <span class="keyword">:id</span> 3 <span class="keyword">:to</span> ,(<a href="pval-mac.html">pval</a> (<a href="pick-fn.html">pick</a> 1 2))))))
(<a href="next-fn.html">next</a> x 10)
<span class="output"(a b1 b2 c b1 b2 c a b1 b2)</span></pre>
</div>

<!-- See also -->
<h4>See Also:</h4>
<ul>
<li><a href="accumulation-cls.html"><kbd>accumulation</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="cycle-cls.html"><kbd>cycle</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="funcall-cls.html"><kbd>funcall</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="heap-cls.html"><kbd>heap</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="join-cls.html"><kbd>join</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="line-cls.html"><kbd>line</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="markov-cls.html"><kbd>markov</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="palindrome-cls.html"><kbd>palindrome</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="random-cls.html"><kbd>random</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="range-cls.html"><kbd>range</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="rewrite-cls.html"><kbd>rewrite</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
<li><a href="rotation-cls.html"><kbd>rotation</kbd></a><kbd>&nbsp;</kbd>[Class]</li>
</ul>


</div>
<hr class="inv"/>

<!-- Footer -->
<div id="footer">
<div id="version">$Name$</div>
<div id="cvs-info">($Revision$, $Date$)</div>
</div>
</body>
</html>


